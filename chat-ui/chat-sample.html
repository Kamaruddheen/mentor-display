<!DOCTYPE html>
<html>

<head>
    <title>Chat Ui</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <!-- animate css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css" />
    <link rel="stylesheet" href="chat-sample.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
    <script>
        $(window).resize(function () {
            if ($(window).width() <= 767) {
                $("#chat").css("height", $(window).height() - 183);
                $("#sidebar").addClass("sidebar animate__animated animate__slideInLeft");
                $("#sidebar_close_top").css("display", "flex");

                $('#goo').click(function () {
                    $('#sidebar').css("display", "block");
                    $('#sidebar').removeClass("animate__slideOutLeft");
                    $('#sidebar').addClass("animate__slideInLeft");
                    $('#overlay').css("display", "block");
                });

                $('#sidebar_close,#overlay').click(function () {
                    $('#sidebar').removeClass("animate__slideInLeft");
                    $('#sidebar').addClass("animate__slideOutLeft");
                    $('#overlay').css("display", "none");
                });
            }
            else {

                $('#overlay').css("display", "none");
                $("#sidebar").removeClass("sidebar animate__animated animate__slideInLeft");
                $("#sidebar_close_top").css("display", "none");

            }
        });
    </script>
</head>

<body>

    <div class="container-fluid shadow-lg " id="main_container">
        <div class="row">
            <!--people list view column 4 -->
            <div class="col-md-4 col-lg-4 px-0" style="height:100vh;">
                <div class="container justify-content-center p-0 m-0">
                    <!--People list card-->
                    <div class="card rounded-0">

                        <!-- Header -->
                        <div class="card-header">
                            <h4 class="card-title"><strong>Mentor Chat</strong></h4>
                        </div>

                        <!-- People List Container -->
                        <div class="container p-0  scroll-beh" id="chat-content" style="overflow-y: scroll !important;">

                            <div class="input-group p-1">
                                <input type="text" class="form-control rounded-custom-left" placeholder="Search"
                                    aria-label="Username" aria-describedby="basic-addon1">
                                <div class="input-group-prepend mr-0">
                                    <button type="button" class="input-group-text rounded-custom-right bg-white"
                                        id="asd"><i class="fa fa-search"></i></button>
                                </div>
                            </div>
                            <div class="dropdown-divider m-0"></div>

                            <!-- People List 1 -->
                            <a href="#" id="goo" class="nav-link p-0">
                                <div class="media mb-0 p-1 bg-info">
                                    <img src="https://hk-23.github.io/sample/female-profile.png"
                                        class="rounded-circle bg-white" id="img-mentor"
                                        style="width: 75px;height: 75px; border: 2px solid white;">
                                    <div class="media-body mx-2">
                                        <h6 class="text-white my-2 font-weight-bold">Muhammadh</h6>
                                        <span class="badge badge-pill badge-danger"
                                            style="float: right;min-width: 50px;">new</span>
                                        <p class="text-white my-1">@user_id</p>
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider m-0"></div>

                            <!-- People List 1 -->
                            <a href="#" class="nav-link p-0">
                                <div class="media mb-0 p-1 bg-info">
                                    <img src="https://hk-23.github.io/sample/male-profile.png"
                                        class="rounded-circle bg-white" id="img-mentor"
                                        style="width: 75px;height: 75px; border: 2px solid white;">
                                    <div class="media-body mx-2">
                                        <h6 class="text-white my-2 font-weight-bold">Muhammadh</h6>
                                        <span class="badge badge-pill badge-danger"
                                            style="float: right;min-width: 50px;">new</span>
                                        <p class="text-white my-1">@user_id</p>
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider m-0"></div>

                            <!-- People List 3 -->
                            <a href="#" class="nav-link p-0">
                                <div class="media mb-0 p-1 bg-info">
                                    <img src="https://hk-23.github.io/sample/female-profile.png"
                                        class="rounded-circle bg-white" id="img-mentor"
                                        style="width: 75px;height: 75px; border: 2px solid white;">
                                    <div class="media-body mx-2">
                                        <h6 class="text-white my-2 font-weight-bold">Muhammadh</h6>
                                        <span class="badge badge-pill badge-danger"
                                            style="float: right;min-width: 50px;">new</span>
                                        <p class="text-white my-1">@user_id</p>
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider m-0"></div>

                            <!-- People List 4 -->
                            <a href="#" class="nav-link p-0">
                                <div class="media mb-0 p-1 bg-info">
                                    <img src="https://hk-23.github.io/sample/male-profile.png"
                                        class="rounded-circle bg-white" id="img-mentor"
                                        style="width: 75px;height: 75px; border: 2px solid white;">
                                    <div class="media-body mx-2">
                                        <h6 class="text-white my-2 font-weight-bold">Muhammadh</h6>
                                        <span class="badge badge-pill badge-danger"
                                            style="float: right;min-width: 50px;">new</span>
                                        <p class="text-white my-1">@user_id</p>
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider m-0"></div>

                            <!-- People List 5 -->
                            <a href="#" class="nav-link p-0">
                                <div class="media mb-0 p-1 bg-info">
                                    <img src="https://hk-23.github.io/sample/female-profile.png"
                                        class="rounded-circle bg-white" id="img-mentor"
                                        style="width: 75px;height: 75px; border: 2px solid white;">
                                    <div class="media-body mx-2">
                                        <h6 class="text-white my-2 font-weight-bold">Muhammadh</h6>
                                        <span class="badge badge-pill badge-danger"
                                            style="float: right;min-width: 50px;">new</span>
                                        <p class="text-white my-1">@user_id</p>
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider m-0"></div>

                            <!-- People List 6 -->
                            <a href="#" class="nav-link p-0">
                                <div class="media mb-0 p-1 bg-info">
                                    <img src="https://hk-23.github.io/sample/male-profile.png"
                                        class="rounded-circle bg-white" id="img-mentor"
                                        style="width: 75px;height: 75px; border: 2px solid white;">
                                    <div class="media-body mx-2">
                                        <h6 class="text-white my-2 font-weight-bold">Muhammadh</h6>
                                        <span class="badge badge-pill badge-danger"
                                            style="float: right;min-width: 50px;">new</span>
                                        <p class="text-white my-1">@user_id</p>
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider m-0"></div>

                            <!-- People List 7 -->
                            <a href="#" class="nav-link p-0">
                                <div class="media mb-0 p-1 bg-info">
                                    <img src="https://hk-23.github.io/sample/female-profile.png"
                                        class="rounded-circle bg-white" id="img-mentor"
                                        style="width: 75px;height: 75px; border: 2px solid white;">
                                    <div class="media-body mx-2">
                                        <h6 class="text-white my-2 font-weight-bold">Muhammadh</h6>
                                        <span class="badge badge-pill badge-danger"
                                            style="float: right;min-width: 50px;">new</span>
                                        <p class="text-white my-1">@user_id</p>
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider m-0"></div>

                            <!-- People List 8 -->
                            <a href="#" class="nav-link p-0">
                                <div class="media mb-0 p-1 bg-info">
                                    <img src="https://hk-23.github.io/sample/male-profile.png"
                                        class="rounded-circle bg-white" id="img-mentor"
                                        style="width: 75px;height: 75px; border: 2px solid white;">
                                    <div class="media-body mx-2">
                                        <h6 class="text-white my-2 font-weight-bold">Muhammadh</h6>
                                        <span class="badge badge-pill badge-danger"
                                            style="float: right;min-width: 50px;">new</span>
                                        <p class="text-white my-1">@user_id</p>
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider m-0"></div>
                        </div>

                    </div>
                </div>
            </div>

            <div id="sidebar" class=".d-none col-sm-none col-md-8 col-lg-8 px-0">
                <div class="container justify-content-center p-0 m-0">

                    <div class="card rounded-0">

                        <div class="list-group list-group-flush text-center" id="sidebar_close_top"
                            style="display:none">
                            <li class="p-2 list-group-item">
                                <span id="sidebar_close" class="float-right">
                                    <a href="#"><i class="fas fa-times fa-lg" style="color: #f06595;"></i></a>
                                </span>
                            </li>
                        </div>

                        <!-- Header -->
                        <div class="card-header">
                            <div class="media mb-0 p-0">
                                <img src="https://hk-23.github.io/sample/female-profile.png"
                                    class="rounded-circle bg-white" id="img-mentor"
                                    style="width: 40px;height: 40px; border: 1px solid white;">

                                <h4 class="card-title mb-0 mt-1 mx-2"><strong>Muhammadh Kamaruddheen</strong></h4>
                            </div>
                        </div>
                        <!-- User Message -->
                        <div class="container p-0 bg-white" id="chat" style="overflow-y: scroll !important;">

                            <div class="container justify-content-center p-0" style="height: 20px;">
                                <div class="p-0 justify-content-center d-flex rounded-pill"
                                    style="background-color: #afafaf41!important;">
                                    <label class="btn badge badge-pill badge-light  mb-0">Unread Messages</label>
                                </div>
                            </div>

                        </div>

                        <!-- Message input box -->
                        <div class="input-group p-1">
                            <input type="text" class="form-control rounded-custom-left" placeholder="Type a message"
                                aria-label="message-mentor" aria-describedby="send-icon-mentor"
                                id="sending-message-mentor">
                            <div class="input-group-prepend mr-0">
                                <button class="input-group-text rounded-custom-right bg-white" id="send-icon-mentor"><i
                                        class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="overlay" id="overlay" style="display: none;">
            </div>
        </div>
    </div>

    <script>

        $(document).ready(function () {
            $('#chat').scrollTop($(document).height());
            $("#chat").removeClass("scroll-beh");    // removing scroll to bottom for each message

            $("#send-icon-mentor").click(function () {
                var now = new Date();

                now.setHours(now.getHours());
                var isPM = now.getHours() >= 12;
                var isMidday = now.getHours() == 12;
                var time = [now.getHours() - (isPM && !isMidday ? 12 : 0),
                now.getMinutes()].join(':') + (isPM ? ' pm' : ' am');

                var msg_mentor = $("#sending-message-mentor").val();

                if (msg_mentor != "") {
                    var styled_msg_time = $("<p></p>").text(time).addClass("user2_meta order-2 d-flex justify-content-end p-0 m-0");
                    var styled_msg = $("<p></p>").text(msg_mentor).addClass("user2 order-1").append(styled_msg_time);
                    var media_body_msg = $("<div></div>").addClass("media-body mx-2").append(styled_msg);
                    var media_msg = $("<div></div>").addClass("media mb-0 mx-2 p-2").append(media_body_msg);

                    $("#chat").append(media_msg);    // message style for me

                    // scrollTop = scrollHeight - clientHeight
                    var h = document.getElementById("chat").clientHeight;
                    var elmnt = document.getElementById("chat");
                    var y = elmnt.scrollHeight;
                    $('#chat').scrollTop(y - h);

                    $("#sending-message-mentor").val('').focus();   // empty input box after sending message
                }
            })

            // while pressing enter key (key no. - 13)
            $("#sending-message-mentor").on("keypress", function (e) {

                if (e.keyCode == 13) {
                    var now = new Date();

                    now.setHours(now.getHours());
                    var isPM = now.getHours() >= 12;
                    var isMidday = now.getHours() == 12;
                    var time = [now.getHours() - (isPM && !isMidday ? 12 : 0),
                    now.getMinutes()].join(':') + (isPM ? ' pm' : ' am');

                    var msg_mentor = $("#sending-message-mentor").val();

                    if (msg_mentor != "") {

                        var styled_msg_time = $("<p></p>").text(time).addClass("user1_meta order-2 d-flex justify-content-end p-0 m-0");
                        var styled_msg = $("<p></p>").text(msg_mentor).addClass("user1 order-1").append(styled_msg_time);
                        var media_body_msg = $("<div></div>").addClass("media-body mx-2").append(styled_msg);
                        var media_msg = $("<div></div>").addClass("media mb-0 mx-2 p-2").append(media_body_msg);

                        $("#chat").append(media_msg);  // message style for you

                        // scrollTop = scrollHeight - clientHeight
                        var h = document.getElementById("chat").clientHeight;
                        var elmnt = document.getElementById("chat");
                        var y = elmnt.scrollHeight;
                        $('#chat').scrollTop(y - h);

                        $("#sending-message-mentor").val('').focus();   // empty input box after sending message
                    }
                }
            });

        });

    </script>
</body>